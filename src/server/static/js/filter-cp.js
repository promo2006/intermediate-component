// Obtengo o inicializo objeto compartido
var sharedObj = sharedObj || {};

// Defino y llamo a funcion encapsulada
(function(obj, location, navigator, document, window) {

    // Obtengo variables de mensajes genericos
    var successHeaderText = "Ã‰xito";
    var failedHeaderText = "Error";
    var closeButtonText = "Cerrar";
    var failedMessage = "No se pudo procesar la solicitud";
    var errorMessage = "Se produjo un error al enviar los datos";

    // Lista de CPs con cobertura
    var allowedCps = [
        "01000", "01010", "01020", "01030", "01040", "01048", "01049", "01050", "01060", "01070", "01080", "01089", "01090", "01100", "01109", "01110", "01120", "01130", "01139", "01140", "01150", "01160", "01170", "01180", "01200", "01210", "01220", "01230", "01239", "01250", "01270", "01276", "01279", "01280", "01289", "01290", "01296", "01298", "01299", "01310", "01320", "01330", "01376", "01377", "01389", "01400", "01407", "01408", "01410", "01419", "01420", "01430", "01450", "01460", "01470", "01480", "01490", "01504", "01509", "01510", "01530", "01539", "01540", "01548", "01549", "01550", "01560", "01566", "01569", "01580", "01585", "01586", "01587", "01590", "01600", "01610", "01618", "01619", "01620", "01630", "01640", "01645", "01650", "01700", "01708", "01710", "01720", "01729", "01730", "01740", "01750", "01759", "01760", "01770", "01780", "01789", "01790", "01800", "01807", "01810", "01820", "01830", "01840", "01849", "01856", "01857", "01859", "01860", "01870", "01900", "01904", "01940", "02000", "02010", "02020", "02040", "02050", "02060", "02070", "02080", "02090", "02099", "02100", "02109", "02110", "02120", "02127", "02128", "02129", "02130", "02140", "02150", "02160", "02169", "02200", "02230", "02240", "02250", "02300", "02310", "02320", "02330", "02340", "02360", "02400", "02409", "02410", "02419", "02420", "02430", "02440", "02450", "02459", "02460", "02470", "02480", "02490", "02500", "02510", "02519", "02525", "02530", "02540", "02600", "02630", "02640", "02650", "02660", "02670", "02680", "02700", "02718", "02719", "02720", "02729", "02730", "02750", "02760", "02770", "02780", "02790", "02800", "02810", "02830", "02840", "02860", "02870", "02900", "02910", "02930", "02940", "02960", "02970", "02980", "02990", "03000", "03010", "03020", "03023", "03100", "03103", "03104", "03200", "03220", "03230", "03240", "03300", "03303", "03310", "03313", "03320", "03330", "03340", "03400", "03410", "03420", "03430", "03440", "03500", "03510", "03520", "03530", "03540", "03550", "03560", "03570", "03580", "03590", "03600", "03610", "03620", "03630", "03640", "03650", "03660", "03700", "03710", "03720", "03730", "03740", "03800", "03810", "03820", "03840", "03900", "03910", "03920", "03930", "03940", "04000", "04010", "04020", "04030", "04040", "04100", "04120", "04200", "04210", "04230", "04239", "04240", "04250", "04260", "04270", "04280", "04300", "04307", "04310", "04317", "04318", "04319", "04320", "04326", "04330", "04336", "04340", "04350", "04359", "04360", "04368", "04369", "04370", "04380", "04390", "04400", "04410", "04420", "04440", "04450", "04460", "04470", "04480", "04490", "04500", "04519", "04530", "04535", "04600", "04610", "04620", "04630", "04640", "04650", "04660", "04700", "04710", "04718", "04719", "04720", "04729", "04730", "04738", "04739", "04800", "04810", "04815", "04830", "04850", "04859", "04870", "04890", "04899", "04908", "04910", "04918", "04919", "04920", "04929", "04930", "04938", "04939", "04940", "04950", "04960", "04970", "04980", "05000", "05010", "05020", "05030", "05039", "05050", "05060", "05100", "05110", "05118", "05119", "05120", "05128", "05129", "05130", "05200", "05214", "05219", "05220", "05230", "05238", "05240", "05249", "05260", "05268", "05269", "05270", "05280", "05310", "05320", "05330", "05348", "05349", "05360", "05370", "05379", "05500", "05530", "05600", "05620", "05780", "06000", "06030", "06100", "06140", "06170", "06220", "06250", "06270", "06350", "06400", "06430", "06450", "06470", "06500", "06600", "06700", "06720", "06728", "06740", "06760", "06780", "06800", "06820",
        "06850", "06860", "06870", "06880", "06890", "06920", "07000", "07010", "07020", "07040", "07050", "07058", "07060", "07069", "07070", "07080", "07089", "07090", "07230", "07268", "07270", "07279", "07290", "07300", "07309", "07310", "07320", "07323", "07329", "07340", "07350", "07359", "07360", "07369", "07370", "07380", "07400", "07420", "07440", "07450", "07455", "07456", "07457", "07458", "07459", "07460", "07469", "07470", "07480", "07500", "07509", "07510", "07520", "07530", "07540", "07548", "07549", "07550", "07560", "07570", "07580", "07600", "07620", "07630", "07640", "07650", "07660", "07670", "07680", "07700", "07707", "07708", "07709", "07710", "07720", "07730", "07738", "07739", "07740", "07750", "07754", "07755", "07760", "07770", "07780", "07790", "07800", "07810", "07820", "07830", "07838", "07839", "07840", "07850", "07858", "07859", "07860", "07869", "07870", "07880", "07889", "07890", "07899", "07900", "07909", "07910", "07918", "07919", "07920", "07930", "07939", "07940", "07950", "07958", "07959", "07960", "07969", "07970", "07979", "07980", "07990", "08000", "08010", "08020", "08029", "08030", "08040", "08100", "08160", "08170", "08180", "08188", "08189", "08200", "08210", "08220", "08230", "08240", "08300", "08310", "08320", "08400", "08500", "08510", "08520", "08560", "08580", "08600", "08610", "08619", "08620", "08650", "08700", "08710", "08720", "08730", "08760", "08770", "08800", "08810", "08820", "08830", "08840", "08900", "08910", "08920", "08930", "09000", "09010", "09060", "09070", "09080", "09089", "09090", "09099", "09100", "09110", "09140", "09150", "09160", "09400", "09410", "09420", "09429", "09430", "09438", "09440", "09450", "09460", "09470", "09479", "09480", "09510", "09790", "09800", "09810", "09819", "09820", "09828", "09829", "09839", "09840", "09849", "09850", "09859", "09860", "09868", "09870", "09880", "09889", "09890", "10000", "10010", "10020", "10100", "10110", "10200", "10300", "10320", "10330", "10340", "10350", "10360", "10368", "10369", "10370", "10378", "10379", "10380", "10400", "10500", "10508", "10580", "10600", "10610", "10620", "10630", "10640", "10660", "10700", "10710", "10720", "10800", "10810", "10820", "10830", "10840", "10900", "10910", "10920", "10926", "11000", "11040", "11100", "11200", "11250", "11260", "11280", "11289", "11300", "11310", "11320", "11330", "11340", "11350", "11360", "11370", "11400", "11410", "11420", "11430", "11440", "11450", "11460", "11470", "11479", "11480", "11489", "11490", "11500", "11510", "11520", "11529", "11530", "11540", "11550", "11560", "11580", "11590", "11600", "11650", "11700", "11800", "11840", "11850", "11860", "11870", "11910", "11930", "11950", "14000", "14010", "14020", "14030", "14038", "14039", "14040", "14049", "14050", "14060", "14070", "14080", "14090", "14098", "14100", "14108", "14110", "14120", "14129", "14130", "14140", "14148", "14150", "14160", "14200", "14208", "14209", "14210", "14220", "14230", "14239", "14240", "14248", "14250", "14260", "14266", "14267", "14268", "14269", "14270", "14273", "14275", "14276", "14300", "14307", "14308", "14309", "14310", "14320", "14324", "14325", "14326", "14327", "14328", "14329", "14330", "14334", "14335", "14336", "14338", "14340", "14350", "14356", "14357", "14358", "14360", "14370", "14376", "14377", "14378", "14380", "14386", "14387", "14388", "14389", "14390", "14399", "14400", "14409", "14410", "14420", "14426", "14427", "14428", "14429", "14430", "14438", "14439", "14440", "14449", "14600", "14608", "14609", "14610", "14620", "14630", "14639", "14640", "14643", "14646",
        "14647", "14650", "14653", "14720", "14730", "14734", "14735", "14737", "14738", "14739", "14740", "14748", "14749", "14750", "15000", "15010", "15020", "15240", "15250", "15260", "15309", "15310", "15390", "15400", "15410", "15420", "15430", "15440", "15450", "15460", "15470", "15500", "15510", "15520", "15530", "15540", "15600", "15610", "15620", "15630", "15640", "15650", "15660", "15669", "15670", "15680", "15700", "15710", "15720", "15730", "15740", "15750", "15800", "15820", "15830", "15840", "15850", "15860", "15870", "15900", "15940", "15950", "15960", "15970", "15980", "15990", "16000", "16010", "16019", "16020", "16029", "16030", "16034", "16035", "16038", "16039", "16040", "16050", "16059", "16060", "16070", "16080", "16090", "16099", "16100", "16200", "16210", "16247", "16300", "16450", "16600", "20000", "20010", "20016", "20018", "20020", "20029", "20030", "20040", "20049", "20050", "20059", "20060", "20064", "20070", "20080", "20089", "20100", "20110", "20115", "20116", "20117", "20118", "20119", "20120", "20123", "20126", "20127", "20129", "20130", "20135", "20136", "20137", "20138", "20140", "20146", "20150", "20157", "20158", "20159", "20160", "20164", "20169", "20170", "20179", "20180", "20190", "20196", "20198", "20199", "20205", "20206", "20210", "20216", "20217", "20220", "20229", "20230", "20234", "20235", "20236", "20237", "20239", "20240", "20247", "20248", "20249", "20250", "20255", "20256", "20257", "20259", "20260", "20263", "20264", "20265", "20266", "20267", "20268", "20269", "20270", "20276", "20277", "20278", "20280", "20285", "20286", "20287", "20288", "20289", "20290", "20297", "20298", "20299", "20925", "20983", "22000", "22010", "22014", "22015", "22020", "22024", "22025", "22030", "22034", "22035", "22040", "22044", "22045", "22046", "22050", "22054", "22055", "22056", "22100", "22104", "22105", "22106", "22110", "22114", "22115", "22116", "22117", "22180", "22185", "22190", "22194", "22195", "22196", "22200", "22203", "22204", "22205", "22206", "22207", "22210", "22214", "22215", "22216", "22217", "22223", "22224", "22226", "22230", "22234", "22235", "22236", "22237", "22244", "22245", "22400", "22404", "22405", "22406", "22410", "22414", "22415", "22416", "22420", "22425", "22426", "22427", "22430", "22435", "22436", "22439", "22444", "22446", "22450", "22454", "22455", "22456", "22457", "22460", "22464", "22465", "22500", "22504", "22505", "22506", "22510", "22515", "22516", "22517", "22520", "22523", "22525", "22526", "22530", "22534", "22535", "22536", "22600", "22604", "22610", "22614", "22615", "22616", "22620", "22624", "22625", "22626", "22630", "22634", "22635", "22636", "22637", "22640", "31000", "31020", "31030", "31034", "31050", "31054", "31060", "31063", "31064", "31065", "31074", "31100", "31104", "31105", "31106", "31107", "31110", "31114", "31120", "31123", "31124", "31125", "31126", "31130", "31134", "31135", "31136", "31137", "31140", "31150", "31180", "31183", "31184", "31200", "31203", "31204", "31205", "31206", "31207", "31210", "31213", "31214", "31215", "31216", "31217", "31300", "31304", "31350", "31370", "31375", "31410", "31416", "31450", "31453", "31455", "31456", "31460", "31470", "32000", "32010", "32020", "32030", "32040", "32050", "32060", "32070", "32080", "32090", "32100", "32110", "32120", "32130", "32140", "32150", "32160", "32170", "32177", "32178", "32180", "32190", "32200", "32210", "32215", "32217", "32220", "32223", "32230", "32234", "32240", "32250", "32260", "32270", "32280", "32290", "32295", "32299", "32300", "32310", "32315", "32317", "32319", "32320",
        "32330", "32340", "32344", "32345", "32349", "32350", "32354", "32360", "32369", "32370", "32376", "32377", "32379", "32380", "32388", "32389", "32390", "32395", "32398", "32399", "32400", "32401", "32402", "32403", "32404", "32409", "32410", "32413", "32414", "32415", "32416", "32417", "32420", "32422", "32423", "32424", "32425", "32427", "32430", "32434", "32435", "32439", "32440", "32446", "32449", "32450", "32451", "32452", "32457", "32459", "32460", "32468", "32469", "32470", "32471", "32472", "32500", "32505", "32507", "32508", "32509", "32510", "32517", "32519", "32520", "32530", "32534", "32535", "32536", "32537", "32538", "32539", "32540", "32543", "32544", "32545", "32546", "32547", "32550", "32553", "32560", "32563", "32564", "32565", "32573", "32574", "32575", "32580", "32583", "32584", "32585", "32586", "32587", "32590", "32598", "32599", "32600", "32605", "32606", "32607", "32609", "32616", "32617", "32618", "32620", "32625", "32628", "32629", "32630", "32640", "32647", "32648", "32650", "32651", "32652", "32654", "32658", "32659", "32660", "32661", "32662", "32663", "32664", "32665", "32667", "32668", "32669", "32670", "32674", "32675", "32676", "32677", "32680", "32685", "32688", "32690", "32693", "32694", "32695", "32696", "32697", "32698", "32699", "32700", "37000", "37004", "37010", "37020", "37100", "37104", "37105", "37106", "37108", "37110", "37118", "37119", "37120", "37123", "37125", "37128", "37129", "37130", "37138", "37140", "37147", "37148", "37149", "37150", "37156", "37157", "37160", "37168", "37170", "37178", "37179", "37180", "37187", "37188", "37189", "37190", "37199", "37200", "37204", "37205", "37206", "37207", "37208", "37210", "37217", "37218", "37219", "37220", "37225", "37227", "37230", "37234", "37235", "37236", "37237", "37238", "37239", "37240", "37249", "37250", "37257", "37258", "37259", "37260", "37266", "37267", "37268", "37269", "37270", "37276", "37277", "37278", "37279", "37280", "37287", "37288", "37289", "37290", "37298", "37300", "37306", "37310", "37315", "37316", "37317", "37318", "37319", "37320", "37327", "37328", "37330", "37340", "37350", "37353", "37355", "37356", "37357", "37358", "37360", "37364", "37366", "37368", "37369", "37380", "37390", "37399", "37400", "37407", "37408", "37410", "37414", "37415", "37416", "37417", "37419", "37420", "37425", "37426", "37427", "37428", "37430", "37438", "37439", "37440", "37444", "37446", "37448", "37450", "37455", "37456", "37457", "37458", "37459", "37460", "37468", "37470", "37477", "37478", "37479", "37480", "37487", "37500", "37510", "37520", "37526", "37530", "37536", "37537", "37538", "37539", "37545", "37549", "37550", "37555", "37557", "37570", "38000", "38009", "38010", "38013", "38014", "38015", "38016", "38017", "38018", "38019", "38020", "38023", "38024", "38027", "38028", "38030", "38033", "38034", "38035", "38036", "38040", "38044", "38046", "38047", "38048", "38050", "38057", "38060", "38065", "38067", "38068", "38070", "38078", "38079", "38080", "38085", "38088", "38089", "38090", "38095", "38096", "38097", "38098", "38099", "38115", "38117", "38140", "42000", "42004", "42010", "42014", "42015", "42018", "42020", "42026", "42027", "42029", "42030", "42032", "42033", "42034", "42035", "42036", "42039", "42040", "42050", "42055", "42056", "42057", "42058", "42060", "42064", "42070", "42074", "42075", "42078", "42079", "42080", "42082", "42083", "42084", "42086", "42088", "42090", "42092", "42093", "42094", "42095", "42096", "42097", "42098", "42100", "42119", "42180", "42181", "42182", "42186", "44100", "44110", "44130",
        "44140", "44150", "44158", "44160", "44180", "44190", "44200", "44210", "44214", "44215", "44216", "44217", "44218", "44220", "44227", "44230", "44240", "44246", "44247", "44249", "44250", "44257", "44258", "44259", "44260", "44265", "44266", "44267", "44268", "44270", "44280", "44290", "44298", "44299", "44300", "44306", "44307", "44320", "44329", "44330", "44340", "44350", "44360", "44370", "44380", "44390", "44398", "44400", "44410", "44420", "44430", "44438", "44440", "44450", "44460", "44467", "44469", "44470", "44490", "44500", "44509", "44510", "44520", "44530", "44535", "44538", "44540", "44549", "44550", "44559", "44580", "44600", "44610", "44619", "44620", "44630", "44635", "44638", "44639", "44647", "44648", "44650", "44656", "44657", "44658", "44660", "44667", "44668", "44670", "44679", "44680", "44689", "44690", "44700", "44710", "44716", "44719", "44720", "44723", "44724", "44725", "44726", "44727", "44730", "44737", "44740", "44748", "44750", "44755", "44757", "44760", "44765", "44766", "44768", "44769", "44770", "44790", "44799", "44800", "44810", "44815", "44817", "44818", "44820", "44824", "44825", "44827", "44828", "44829", "44840", "44860", "44870", "44890", "44895", "44896", "44897", "44899", "44900", "44910", "44918", "44919", "44920", "44930", "44940", "44948", "44949", "44950", "44956", "44959", "44960", "44966", "44967", "44969", "44970", "44980", "44984", "44985", "44987", "44989", "45010", "45012", "45013", "45014", "45016", "45017", "45018", "45019", "45020", "45027", "45030", "45034", "45035", "45036", "45037", "45038", "45039", "45040", "45047", "45049", "45050", "45053", "45054", "45055", "45056", "45057", "45058", "45059", "45060", "45065", "45066", "45067", "45068", "45069", "45070", "45076", "45077", "45078", "45079", "45080", "45085", "45086", "45087", "45088", "45089", "45100", "45110", "45116", "45117", "45118", "45119", "45120", "45128", "45129", "45130", "45133", "45134", "45135", "45136", "45138", "45140", "45145", "45146", "45147", "45148", "45149", "45150", "45157", "45158", "45159", "45160", "45167", "45168", "45169", "45170", "45176", "45177", "45178", "45179", "45180", "45184", "45185", "45186", "45187", "45188", "45189", "45190", "45198", "45199", "45200", "45230", "45234", "45235", "45236", "45237", "45238", "45239", "45400", "45402", "45403", "45404", "45407", "45414", "45418", "45500", "45509", "45510", "45519", "45520", "45525", "45527", "45528", "45530", "45535", "45540", "45550", "45559", "45560", "45567", "45570", "45579", "45580", "45589", "45593", "45601", "45602", "45606", "45607", "45608", "45609", "45625", "45643", "45645", "45647", "50000", "50010", "50016", "50017", "50018", "50020", "50026", "50040", "50050", "50060", "50070", "50075", "50076", "50080", "50090", "50100", "50110", "50120", "50123", "50130", "50140", "50150", "50160", "50168", "50170", "50180", "50190", "50200", "50203", "50205", "50220", "50225", "50226", "50227", "50228", "50230", "50235", "50240", "50245", "50246", "50250", "50253", "50260", "50263", "50265", "50266", "50273", "51355", "51356", "52105", "52140", "52149", "52150", "52154", "52155", "52156", "52157", "52159", "52160", "52161", "52164", "52165", "52166", "52167", "52168", "52169", "52170", "52172", "52175", "52176", "52177", "52178", "52179", "52763", "52764", "52770", "52774", "52775", "52776", "52777", "52778", "52779", "52780", "52783", "52784", "52785", "52786", "52787", "52788", "52900", "52909", "52910", "52915", "52918", "52919", "52920", "52923", "52924", "52925", "52926", "52927", "52928", "52929", "52940", "52945", "52946", "52947",
        "52948", "52949", "52950", "52953", "52957", "52958", "52959", "52960", "52965", "52966", "52967", "52970", "52975", "52976", "52977", "52978", "52979", "52980", "52985", "52986", "52987", "52988", "52990", "52994", "52995", "52996", "52997", "52998", "53000", "53010", "53030", "53040", "53050", "53060", "53070", "53100", "53110", "53115", "53116", "53120", "53125", "53127", "53128", "53129", "53130", "53138", "53140", "53150", "53160", "53178", "53200", "53220", "53224", "53227", "53230", "53237", "53239", "53240", "53247", "53248", "53250", "53260", "53270", "53278", "53279", "53280", "53290", "53298", "53300", "53309", "53310", "53320", "53329", "53330", "53338", "53339", "53340", "53370", "53398", "53400", "53410", "53420", "53426", "53440", "53450", "53458", "53459", "53460", "53470", "53489", "53490", "53500", "53520", "53529", "53530", "53533", "53550", "53560", "53569", "53570", "53580", "53598", "53640", "53660", "53680", "53688", "53689", "53690", "53694", "53696", "53700", "53708", "53713", "53714", "53717", "53719", "53730", "53760", "53770", "53788", "53950", "53960", "53970", "54000", "54010", "54017", "54020", "54021", "54022", "54023", "54025", "54026", "54028", "54030", "54033", "54037", "54038", "54040", "54049", "54050", "54054", "54055", "54057", "54059", "54060", "54063", "54067", "54069", "54070", "54073", "54075", "54076", "54080", "54090", "54092", "54093", "54094", "54098", "54100", "54108", "54109", "54120", "54126", "54127", "54128", "54130", "54134", "54135", "54140", "54143", "54145", "54146", "54147", "54150", "54152", "54158", "54160", "54162", "54168", "54170", "54172", "54173", "54180", "54190", "54700", "54710", "54712", "54713", "54714", "54715", "54719", "54720", "54725", "54729", "54730", "54740", "54743", "54744", "54750", "54753", "54759", "54760", "54763", "54764", "54765", "54767", "54769", "54800", "54803", "54805", "54807", "54834", "54840", "54850", "54857", "54858", "54860", "54870", "54875", "54877", "54878", "54879", "54900", "54910", "54913", "54914", "54915", "54916", "54918", "54920", "54926", "54930", "54932", "54939", "54940", "54942", "54943", "54944", "54945", "54946", "54948", "54949", "54950", "54955", "54957", "54958", "54959", "54980", "54984", "54985", "54986", "54987", "54990", "55000", "55010", "55014", "55016", "55017", "55018", "55020", "55023", "55024", "55025", "55027", "55029", "55030", "55040", "55050", "55055", "55056", "55057", "55070", "55075", "55090", "55100", "55104", "55105", "55114", "55115", "55117", "55118", "55119", "55120", "55125", "55126", "55127", "55128", "55129", "55130", "55135", "55137", "55138", "55139", "55140", "55146", "55147", "55148", "55149", "55158", "55170", "55176", "55179", "55180", "55187", "55188", "55189", "55190", "55200", "55210", "55220", "55230", "55234", "55235", "55236", "55237", "55238", "55240", "55242", "55243", "55244", "55245", "55246", "55247", "55248", "55249", "55260", "55264", "55266", "55267", "55268", "55269", "55270", "55280", "55287", "55288", "55289", "55290", "55294", "55295", "55296", "55297", "55298", "55299", "55330", "55338", "55339", "55360", "55404", "55430", "55450", "55490", "55498", "55700", "55705", "55707", "55708", "55709", "55710", "55712", "55713", "55714", "55715", "55716", "55717", "55718", "55719", "55720", "55726", "55728", "55729", "55730", "55736", "55737", "55738", "55739", "56420", "57000", "57100", "57120", "57129", "57130", "57138", "57139", "57140", "57150", "57170", "57178", "57179", "57180", "57185", "57188", "57189", "57200", "57210", "57300", "57310", "57400", "57410", "57420", "57430",
        "57440", "57450", "57460", "57465", "57500", "57510", "57520", "57530", "57600", "57610", "57620", "57630", "57700", "57708", "57709", "57710", "57718", "57719", "57720", "57730", "57739", "57740", "57750", "57760", "57800", "57810", "57820", "57830", "57840", "57849", "57900", "57910", "57920", "57930", "57940", "57950", "58000", "58010", "58020", "58030", "58040", "58048", "58049", "58050", "58055", "58056", "58057", "58060", "58066", "58067", "58069", "58070", "58078", "58080", "58085", "58086", "58087", "58088", "58089", "58090", "58095", "58096", "58097", "58098", "58110", "58114", "58115", "58116", "58117", "58120", "58128", "58130", "58140", "58146", "58147", "58148", "58149", "58150", "58158", "58160", "58168", "58170", "58175", "58178", "58179", "58180", "58186", "58189", "58190", "58194", "58195", "58196", "58197", "58199", "58210", "58220", "58226", "58227", "58228", "58229", "58230", "58240", "58244", "58245", "58248", "58249", "58250", "58254", "58255", "58256", "58257", "58258", "58259", "58260", "58270", "58277", "58278", "58280", "58290", "58295", "58296", "58297", "58304", "58330", "58331", "58337", "58343", "58350", "62000", "62010", "62019", "62020", "62040", "62050", "62070", "62080", "62083", "62100", "62120", "62130", "62133", "62137", "62139", "62140", "62143", "62144", "62145", "62150", "62153", "62156", "62157", "62158", "62159", "62160", "62163", "62164", "62165", "62166", "62170", "62173", "62179", "62180", "62190", "62193", "62210", "62230", "62233", "62237", "62239", "62240", "62243", "62245", "62247", "62250", "62253", "62260", "62269", "62270", "62283", "62290", "62293", "62294", "62295", "62296", "62320", "62328", "62330", "62335", "62340", "62343", "62350", "62360", "62363", "62370", "62374", "62375", "62376", "62380", "62382", "62384", "62385", "62387", "62388", "62389", "62390", "62398", "62400", "62409", "62410", "62420", "62428", "62430", "62440", "62445", "62446", "62447", "62448", "62450", "62460", "62466", "62469", "62470", "62473", "62474", "62475", "62480", "62490", "62493", "62494", "62496", "62497", "62498", "62550", "62553", "62554", "62555", "62556", "62560", "62563", "62564", "62565", "62566", "62570", "62573", "62577", "62578", "62584", "62585", "62760", "62763", "62764", "62765", "64000", "64010", "64018", "64019", "64020", "64030", "64040", "64049", "64050", "64060", "64070", "64100", "64102", "64103", "64104", "64105", "64106", "64107", "64108", "64109", "64110", "64116", "64117", "64118", "64119", "64120", "64130", "64140", "64145", "64148", "64150", "64157", "64158", "64159", "64160", "64165", "64166", "64167", "64168", "64170", "64178", "64180", "64186", "64190", "64234", "64240", "64250", "64258", "64280", "64300", "64310", "64320", "64330", "64339", "64340", "64344", "64346", "64347", "64348", "64349", "64350", "64360", "64365", "64366", "64367", "64368", "64369", "64370", "64380", "64390", "64410", "64420", "64429", "64430", "64440", "64449", "64450", "64460", "64470", "64480", "64488", "64489", "64490", "64510", "64517", "64520", "64530", "64536", "64540", "64550", "64560", "64568", "64570", "64580", "64590", "64600", "64610", "64613", "64618", "64619", "64620", "64630", "64632", "64634", "64635", "64636", "64637", "64638", "64639", "64649", "64650", "64659", "64660", "64700", "64710", "64715", "64718", "64720", "64730", "64740", "64750", "64760", "64764", "64769", "64770", "64780", "64783", "64788", "64790", "64798", "64799", "64800", "64810", "64820", "64830", "64833", "64834", "64836", "64840", "64844", "64845", "64850", "64859", "64860", "64880", "64890", "64893", "64898",
        "64899", "64900", "64909", "64910", "64920", "64925", "64930", "64940", "64949", "64950", "64960", "64968", "64969", "64970", "64978", "64979", "64989", "66050", "66051", "66052", "66053", "66054", "66055", "66056", "66057", "66058", "66059", "66062", "66070", "66072", "66073", "66074", "66075", "66100", "66110", "66114", "66115", "66116", "66117", "66118", "66119", "66120", "66129", "66130", "66139", "66145", "66165", "66166", "66170", "66179", "66200", "66210", "66214", "66216", "66219", "66220", "66224", "66225", "66226", "66227", "66228", "66230", "66233", "66235", "66236", "66237", "66238", "66239", "66240", "66244", "66247", "66249", "66250", "66254", "66256", "66257", "66259", "66263", "66264", "66265", "66266", "66267", "66268", "66270", "66273", "66276", "66277", "66278", "66279", "66280", "66285", "66286", "66287", "66297", "66350", "66354", "66356", "66357", "66358", "66359", "66360", "66362", "66363", "66364", "66365", "66366", "66367", "66368", "66369", "66370", "66373", "66374", "66375", "66376", "66377", "66378", "66400", "66422", "66425", "66430", "66434", "66436", "66437", "66438", "66440", "66444", "66446", "66447", "66450", "66456", "66460", "66463", "66464", "66465", "66466", "66467", "66468", "66469", "66470", "66473", "66474", "66475", "66476", "66477", "66478", "66479", "66480", "66484", "66486", "66488", "66490", "66492", "66494", "66495", "66496", "66499", "66600", "66610", "66612", "66633", "66634", "66635", "66636", "66640", "66644", "66648", "66649", "67100", "67110", "67112", "67113", "67115", "67116", "67117", "67118", "67119", "67120", "67123", "67124", "67125", "67126", "67128", "67129", "67133", "67134", "67140", "67144", "67150", "67154", "67155", "67160", "67163", "67164", "67165", "67166", "67167", "67168", "67169", "67170", "67173", "67174", "67175", "67176", "67177", "67178", "67179", "67180", "67182", "67183", "67184", "67185", "67186", "67188", "67189", "67190", "67192", "67193", "67194", "67195", "67196", "67197", "67198", "67199", "67200", "67202", "67203", "67204", "67205", "67257", "67280", "67287", "67288", "72000", "72010", "72040", "72044", "72050", "72054", "72060", "72062", "72070", "72080", "72089", "72090", "72094", "72105", "72114", "72120", "72124", "72127", "72130", "72135", "72140", "72150", "72154", "72160", "72170", "72176", "72180", "72189", "72190", "72193", "72196", "72197", "72200", "72210", "72220", "72223", "72225", "72230", "72240", "72243", "72250", "72260", "72266", "72267", "72270", "72280", "72289", "72290", "72300", "72303", "72307", "72308", "72314", "72320", "72330", "72340", "72370", "72373", "72377", "72380", "72400", "72403", "72410", "72420", "72423", "72424", "72425", "72430", "72440", "72450", "72453", "72454", "72456", "72459", "72460", "72464", "72468", "72470", "72474", "72477", "72480", "72482", "72484", "72490", "72492", "72494", "72495", "72496", "72498", "72499", "72500", "72501", "72503", "72504", "72505", "72510", "72520", "72530", "72532", "72533", "72534", "72538", "72540", "72543", "72550", "72560", "72565", "72567", "72570", "72580", "72582", "72583", "72587", "72589", "72590", "72592", "72593", "72594", "72595", "72599", "72700", "72724", "72735", "72750", "72754", "72756", "72757", "72760", "72764", "72767", "72768", "72770", "72772", "72774", "72775", "72776", "72777", "72778", "72803", "72805", "72810", "72813", "72814", "72815", "72819", "72824", "72825", "72828", "72830", "76000", "76005", "76010", "76017", "76020", "76024", "76025", "76027", "76028", "76030", "76037", "76040", "76046", "76047", "76048", "76049", "76050", "76057", "76058",
        "76060", "76063", "76069", "76070", "76074", "76078", "76079", "76080", "76085", "76086", "76087", "76090", "76093", "76099", "76100", "76110", "76113", "76114", "76115", "76116", "76117", "76118", "76120", "76121", "76125", "76130", "76134", "76135", "76136", "76137", "76138", "76139", "76140", "76144", "76146", "76147", "76148", "76149", "76150", "76154", "76155", "76156", "76157", "76158", "76159", "76160", "76164", "76165", "76166", "76168", "76169", "76170", "76175", "76176", "76177", "76178", "76179", "76180", "76185", "76186", "76190", "76197", "76199", "76200", "76220", "76226", "76230", "76900", "76902", "76903", "76904", "76912", "77500", "77503", "77504", "77505", "77506", "77507", "77508", "77509", "77510", "77513", "77514", "77515", "77516", "77517", "77518", "77519", "77520", "77524", "77525", "77526", "77527", "77530", "77533", "77534", "77535", "77536", "77537", "77538", "77539", "77560", "78000", "78038", "78040", "78049", "78110", "78120", "78130", "78133", "78135", "78136", "78137", "78140", "78144", "78146", "78147", "78148", "78150", "78153", "78154", "78165", "78170", "78173", "78174", "78175", "78176", "78177", "78178", "78180", "78200", "78209", "78210", "78213", "78214", "78216", "78218", "78219", "78220", "78230", "78233", "78234", "78238", "78239", "78240", "78250", "78268", "78269", "78270", "78280", "78290", "78294", "78298", "78300", "78306", "78307", "78309", "78310", "78318", "78319", "78320", "78328", "78330", "78338", "78339", "78340", "78349", "78350", "78356", "78358", "78359", "78360", "78364", "78367", "78368", "78369", "78370", "78377", "78378", "78379", "78380", "78384", "78385", "78387", "78388", "78389", "78390", "78394", "78395", "78396", "78398", "78399", "78432", "78434", "78435", "78436", "78437", "78438", "91000", "91010", "91013", "91014", "91015", "91017", "91020", "91023", "91024", "91025", "91026", "91027", "91030", "91033", "91037", "91040", "91045", "91046", "91047", "91048", "91049", "91050", "91053", "91054", "91055", "91056", "91057", "91060", "91063", "91064", "91065", "91066", "91067", "91069", "91070", "91073", "91075", "91080", "91083", "91084", "91090", "91093", "91094", "91095", "91096", "91097", "91098", "91100", "91103", "91105", "91106", "91107", "91110", "91113", "91114", "91119", "91120", "91123", "91129", "91130", "91133", "91140", "91143", "91150", "91152", "91153", "91154", "91155", "91156", "91157", "91158", "91160", "91163", "91164", "91170", "91173", "91174", "91179", "91180", "91183", "91184", "91185", "91186", "91190", "91193", "91194", "91196", "91197", "91198", "91637", "91640", "91700", "91710", "91712", "91713", "91718", "91720", "91726", "91727", "91728", "91729", "91730", "91739", "91740", "91749", "91750", "91755", "91756", "91757", "91759", "91760", "91769", "91770", "91777", "91778", "91779", "91780", "91788", "91789", "91790", "91800", "91808", "91809", "91810", "91820", "91829", "91840", "91841", "91850", "91855", "91859", "91860", "91870", "91880", "91890", "91891", "91897", "91898", "91900", "91910", "91916", "91918", "91919", "91920", "91928", "91930", "91936", "91938", "91940", "91947", "91948", "91960", "91963", "91965", "91968", "91969", "94293", "94294", "94295", "94296", "94297", "94298", "94299", "97000", "97050", "97059", "97060", "97068", "97069", "97070", "97080", "97088", "97089", "97099", "97100", "97108", "97109", "97110", "97113", "97114", "97115", "97116", "97117", "97118", "97119", "97120", "97125", "97127", "97128", "97129", "97130", "97133", "97134", "97135", "97136", "97137", "97138", "97139", "97140", "97142", "97143", "97144",
        "97145", "97146", "97147", "97148", "97149", "97150", "97155", "97156", "97157", "97158", "97159", "97160", "97165", "97166", "97167", "97168", "97169", "97170", "97175", "97176", "97178", "97180", "97189", "97203", "97204", "97205", "97206", "97207", "97208", "97209", "97210", "97215", "97217", "97218", "97219", "97220", "97225", "97226", "97227", "97229", "97230", "97237", "97238", "97239", "97240", "97245", "97246", "97249", "97250", "97270", "97279", "97300", "97302", "97314"
    ];

    // Devuelve parametros del querystring de una URL
    var getParameterByName = function(url, name) {
        if (!url) return null;
        name = name.replace(/[\[\]]/g, "\\$&");
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)");
        var results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return "";
        return decodeURIComponent(results[2].replace(/\+/g, " "));
    };

    // Valida si el CP esta dentro de la lista de permitidos
    var cpAllowed = function(cpToValidate) {
        // Busco el CP introducido dentro del array
        var found = allowedCps.find(function(element) { return (element === cpToValidate); });
        // Devuelvo resultado
        return (!!found);
    };

    // Funcion para abrir formulario modal
    var showModal = function(title, body, close, onClose) {
        // Actualizo los campos con los textos recibidos
        $("#icModalTitle").html(title);
        $("#icModalBody").html(body);
        $("#icModalCloseButton").html(close);
        // Asocio la funcion a ejecutar al cerrar si existe
        if (typeof onClose === "function") $("#icModal").on("hidden.bs.modal", onClose);
        // Mando a abrir el formulario
        $("#icModal").modal("show");
    };

    // Funcion de submit para el formulario de captura de CP
    var onC1Submit = function(event) {
        // Obtengo el objeto form
        var form = $(this);
        // Obtengo valor del CP
        var inputCp = form.find('input[id="postalcode-input"]').val();
        // Le agrego 0s a la izquierda y lo dejo en 5 digitos
        inputCp = ("00000" + inputCp.toString()).slice(-5);
        // Si tengo CP y es valido cambio de modal
        if (inputCp && !isNaN(inputCp) && inputCp.toString().length === 5) {
            // Refresco pasando el CP como parametro de la URL
            location.href = location.href + (location.href.indexOf("?") > -1 ? "&" : "?") + "cp=" + inputCp.toString();
        }
    };

    // Funcion de submit para el formulario de no cobertura
    var onC2Submit = function(event) {
        // Obtengo el objeto form
        var form = $(this);
        // Recupero el array de parametros que se armo para el tracking
        var visitParams = (obj.tracking && obj.tracking.visitParams) || {};
        // Obtengo datos a enviar
        var visitId = visitParams.visitId;
        var campaignId = obj.campaignId;
        var contentType = obj.contentType;
        var contentId = obj.contentId;
        var url = location.href.split("?")[0];
        var phone = form.find('input[id="tel-no-cobertura"]').val();
        var submitCp = getParameterByName(location.href, "cp") || "";
        // Datos para enviar el request al servidor
        var postUrl = "/public/note/store";
        var postTimeout = 30000;
        var postData = {
            type: "TOTALPLAY_SIN_COBERTURA",
            sourceType: "visit",
            sourceId: visitId,
            data1: campaignId,
            data2: contentType,
            data3: contentId,
            data4: url,
            data5: phone,
            data6: submitCp
        };
        // Envio post al servidor para procesar el click
        $.ajax({
            type: "POST",
            url: postUrl,
            data: JSON.stringify(postData),
            dataType: "json",
            contentType: "application/json",
            timeout: postTimeout,
            success: function(response, textStatus, jqXHR) {
                if (response && response.status) {
                    // Cierro un modal y abro el otro
                    $("#modal-c2").modal("hide");
                    $("#modal-c3").modal("show");
                } else {
                    var msg = response.error || response.description || failedMessage;
                    showModal(failedHeaderText, msg, closeButtonText);
                }
            },
            error: function(jqXHR, textStatus, errorThrown) {
                var msg = errorMessage + ": " + textStatus;
                showModal(failedHeaderText, msg, closeButtonText);
            }
        });
    };

    // Asocio eventos de submit del modal C1
    $("#modal-c1").find("form").submit(onC1Submit);
    // Seteo el codigo postal como campo requerido y con 5 digitos
    $("#modal-c1").find("form").find('input[id*="postalcode"]').prop("required", true);
    $("#modal-c1").find("form").find('input[id*="postalcode"]').prop("min", "1000");
    $("#modal-c1").find("form").find('input[id*="postalcode"]').prop("max", "99999");

    // Asocio eventos de submit del modal C2
    $("#modal-c2").find("form").submit(onC2Submit);
    // Seteo el telefono como campo requerido
    $("#modal-c2").find("form").find('input[name*="terms"]').prop("required", true);
    // Seteo el telefono como campo requerido
    $("#modal-c2").find("form").find('input[id*="phone"]').prop("required", true);
    // Cambio el nombre del telefono para que no se detecte como formulario de c2c
    $("#modal-c2").find("form").find('input[id*="phone"]').attr("id", "tel-no-cobertura");

    // Obtengo CP de la URL
    var cp = getParameterByName(location.href, "cp") || "";

    // Si tengo valor de CP lo guardo localmente
    if (cp) {
        // Valido si el CP esta entre los permitidos
        var allowed = cpAllowed(cp);
        // Si el objeto contactData no existe lo creo
        obj.contactData = obj.contactData || {};
        // Asocio los datos de contacto
        obj.contactData.zip = cp;
        obj.contactData.cobertura = (allowed ? "SI" : "NO");
        // Si tengo cp y no esta dentro de la lista de permitidos
        if (!allowed) {
            // Abro el modal incdicando que no hay cobertura
            $("#modal-c2").modal("show");
        }
    } else {
        // Si no tengo CP abro el modal que pregunta CP
        $("#modal-c1").modal("show");
    }
})(sharedObj, location, navigator, document, window);
